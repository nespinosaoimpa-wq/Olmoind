;/*FB_PKG_DELIM*/

__d("CAALoginHomepageLoginFormBase.react",["fbt","CAAFetaAccountRecoveryButton.react","CAAFetaErrorBanner.react","CAALoggedOutIdentifierInputComet.react","CAALoggedOutPasswordInputComet.react","CAALoginHomepageLoginFormBase_query.graphql","CAALoginIGLegalReportingGatingUtils","CAALoginLoggedOutHomeStrings","CAALoginQEUtils","CAARegistrationCreateAccountButton","CAAWebLoggingUtils","CAAWebLoginLoggingEventUtils","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometRelay","CometRouteParams","CometRouteURL","CometSSRRenderingStateHooks","FBLogger","MAEntAccountTypeNameUtils","MetaBrandGoogleOutline24.svg.react","MetaLockupPrimary.react","PasskeyAuthenticationUtils","XMDSButton.react","XMDSIcon.react","asyncToGeneratorRuntime","cr:17232","cr:17233","cr:4837","cr:8547","emptyFunction","getErrorSafe","qex","react","stylex","useCAAFetaHasStateSynced","useCAAFetaSyncedNoScriptButton","useCAALoginSubmit.react","useCAALoginUpsellARNotification","useContactPointPrefill","useNetworkDetectionAndStopLoading","useSinglePartialViewImpression","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d,_=p.useCallback,f=p.useEffect,g=p.useRef,h=p.useState,y=n("cr:17232")!=null?n("cr:17232"):n("cr:17233"),C=(u=r("qex")._("1279"))!=null?u:!1,b=function(){return r("qex")._("329")===!0};function v(t){var a=t.appId,i=t.authDomainDataKey,l=t.doLoginAttemptOnMount,u=t.entryPoint,d=u===void 0?"login":u,p=t.eventFlow,v=t.eventStep,S=t.hasBottomPadding,R=S===void 0?!0:S,L=t.hasTopPadding,E=L===void 0?!0:L,k=t.lids,I=t.next,T=t.onClose,D=t.onCreateAccount,x=t.onFocusField,$=t.onForgotPassword,P=t.onLogin,N=t.paddingHorizontal,M=N===void 0?20:N,w=t.prefillContactpointProp,A=t.prefillPasswordProp,F=t.query,O=t.showMetaBranding,B=O===void 0?!0:O,W=t.xstyle,q=o("CometRelay").useFragment(e!==void 0?e:e=n("CAALoginHomepageLoginFormBase_query.graphql"),F),U=q.caa_login_form_data,V=U.prefill_contactpoint,H=U.reg_instance,G=U.reset_uri,z=o("MAEntAccountTypeNameUtils").appIdToMAEntAccountType(a),j=q.caa_youth_regulation_data.should_block_reg_on_youth_regulation,K=o("CometRouteParams").useRouteParams(),Q=K.kid_directed_site,X=K.force_authentication===!0,Y=Q==="true"||Q==="1",J=h(r("useContactPointPrefill")(w!=null?w:V)),Z=J[0],ee=J[1],te=h(),ne=te[0],re=te[1],oe=h(A!=null?A:""),ae=oe[0],ie=oe[1],le=r("useCAAFetaHasStateSynced")([ee,ie]),se=le.hasAllStateSynced,ue=le.wrappedSetters,ce=ue[0],de=ue[1],me=h(!1),pe=me[0],_e=me[1],fe=o("CometRouteURL").useRouteURLParams(),ge=K.e!==void 0&&a===0x7e36f3fcc43bc||fe.e!==void 0&&(a===0x453bf7349370c||a===936619743392459),he=h(ge?"GENERIC_BANNER":null),ye=he[0],Ce=he[1],be=h(null),ve=be[0],Se=be[1],Re=h(!1),Le=Re[0],Ee=Re[1],ke=h(!1),Ie=ke[0],Te=ke[1],De=h(null),xe=De[0],$e=De[1],Pe=function(t){t&&(_e(!1),Ce("GENERIC_BANNER"),Ee(!0))};r("useNetworkDetectionAndStopLoading")(pe,Pe);var Ne=_(function(){return Z.length>=q.caa_login_form_data.min_character_length.contact_point&&ae.length>=q.caa_login_form_data.min_character_length.password},[Z,ae,q.caa_login_form_data.min_character_length]),Me=function(t){var e=t.target instanceof HTMLElement?t.target:null;if((t.key==="Enter"||t.keyCode===13)&&e&&(e.id==="royal-login-button"||e.nodeName==="INPUT"))return t.preventDefault(),t.stopPropagation(),!1},we=r("useCAALoginUpsellARNotification")(),Ae=function(t,r,o,a){var e;a===void 0&&(a=null),n("cr:4837")!=null&&n("cr:4837")(t,r,o,a,ae,_e,Ce,Se),we(t==null||(e=t.caa_login_web)==null?void 0:e.ig_login_upsell_ar)},Fe=r("useCAALoginSubmit.react")(a,k,I,i,q.caa_login_form_data,q,v,p,n("cr:4837")!=null?r("emptyFunction"):_e,Ce,Se,null,r("emptyFunction"),r("emptyFunction"),"PASSWORD",Ae,re,Te,$e),Oe=r("useCAALoginSubmit.react")(a,k,I,i,q.caa_login_form_data,q,v,p,n("cr:4837")!=null?r("emptyFunction"):_e,Ce,Se,null,r("emptyFunction"),r("emptyFunction"),"PASSKEY",Ae),Be=function(t,n){o("CAAWebLoggingUtils").logLoginEvent({event:t,event_category:o("CAAWebLoginLoggingEventUtils").getEventInteractionCategory(n),event_flow:"login_manual",event_step:n},z)},We=v!=null?v:"home_page",qe=o("CometSSRRenderingStateHooks").useIsServerRenderingOrHydrating(),Ue=_(function(){Fe.doCAALogin(Z,ae,!1,"password",null,ne),_e(!0),Ee(!1),Ce(null)},[Z,ae,ne,Fe,_e,Ee,Ce]),Ve=function(t){t==null||t.preventDefault(),Be("login_button_clicked",We),P==null||P(),Ue()},He=g(!1);f(function(){l!=null&&!He.current&&(He.current=!0,l(Ue))},[l,Ue]),f(function(){var e=Ne();return e?window.removeEventListener("keydown",Me):window.addEventListener("keydown",Me),function(){window.removeEventListener("keydown",Me)}},[Z,ae,Ne]),f(function(){ne!=null&&Ve()},[ne]);var Ge=function(){Be("login_with_fb_button_tapped",We)},ze=q.caa_passkey_auth_options,je=!pe&&ye==="GENERIC_BANNER"&&m.jsx(r("CometColumnItem.react"),{align:"stretch",paddingHorizontal:M,paddingTop:E?12:0,paddingVertical:20,testid:void 0,children:m.jsx(r("CAAFetaErrorBanner.react"),{appType:z,errorMessage:ve,logClick:function(){Be("find_your_account_and_login_clicked",We)},offline:Le})}),Ke=r("useVisibilityObserver")({onVisible:function(){o("PasskeyAuthenticationUtils").initiatePasskeyAuthentication(ze,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){_e(!0),yield Oe.doCAALogin(Z,ae,null,"passkey",e)});return function(t){return e.apply(this,arguments)}})()).catch(function(e){r("FBLogger")("caa_login_core_product").catching(r("getErrorSafe")(e)).mustfix("Passkey authentication failed during visibility callback")})}}),Qe=!pe&&Ie&&xe!=null&&m.jsx(r("CometColumnItem.react"),{paddingTop:12,children:m.jsx(r("XMDSButton.react"),{addOnStart:function(t){var e=t.iconProps;return m.jsx(r("XMDSIcon.react"),{color:e.color,icon:r("MetaBrandGoogleOutline24.svg.react"),size:e.size})},label:s._(/*BTDS*/"Iniciar sesi\u00f3n con Google"),linkProps:{url:xe},onPress:function(){o("CAAWebLoggingUtils").logLoginEvent({event:"login_with_google_button_clicked",event_category:o("CAAWebLoginLoggingEventUtils").getEventInteractionCategory(We),event_flow:"login_manual",event_step:We},z)},size:"large",testid:void 0,type:"secondary"})}),Xe=r("useSinglePartialViewImpression")({onImpressionStart:function(){o("CAAWebLoggingUtils").logLoginEvent({event:"login_step_view_loaded",event_category:o("CAAWebLoginLoggingEventUtils").getEventInitCategory(We),event_flow:p!=null?p:"login_manual",event_step:We,extra_client_data:{path:o("CAAWebLoginLoggingEventUtils").getCurrentPath()}},z)}}),Ye=r("useSinglePartialViewImpression")({onImpressionStart:function(){Be("login_button_step_view_loaded",We)}}),Je=h(null),Ze=Je[0],et=Je[1],tt=g(!1);f(function(){tt.current!==!0&&(b()===!1&&(o("CAALoginQEUtils").enableIgWebAymhImprovements()||o("CAALoginQEUtils").enableFbAutofocus())&&x==null?(et(Z===""?"email":"password"),tt.current=!0):x!=null?x(function(){return et("email")},function(){return et("password")}):b()===!0&&se&&Z===""&&ae===""&&et("email"))},[Z,se,x,ae]);var nt=a===0x453bf7349370c&&d!=="logged_out_dialog"&&o("CAALoginIGLegalReportingGatingUtils").isLoggedOutFRXEligible(),rt=r("useCAAFetaSyncedNoScriptButton")({disabled:qe?!1:!Ne(),hasAllStateSynced:se,label:C?s._(/*BTDS*/"Iniciar sesi\u00f3n"):r("CAALoginLoggedOutHomeStrings").loginButtonText,loading:pe,onMountAndClicked:Ve,onPress:Ve,ref:Ye,size:"large",testid:"royal-login-button"});return m.jsx(r("CometErrorBoundary.react"),{fallback:function(){return m.jsx("div",{})},children:m.jsx("form",{disabled:pe,id:"login_form",method:"POST",noValidate:!0,onSubmit:Ve,ref:Fe.loginFormRef,children:m.jsxs("div",babelHelpers.extends({},(c||(c=r("stylex"))).props(W),{ref:Ke,children:[m.jsxs(r("CometColumn.react"),{align:"center",paddingHorizontal:M,paddingTop:12,paddingVertical:R?12:0,ref:Xe,spacing:12,children:[je,m.jsx(r("CometColumnItem.react"),{paddingTop:E?20:0,children:m.jsx(r("CAALoggedOutIdentifierInputComet.react"),{appType:z,disabled:pe,errorMessage:!pe&&ye==="INLINE_IDENTIFIER"?ve:null,focus:Ze==="email",identifier:Z,onFocus:function(){return Be("login_contactpoint_focus",We)},setIdentifier:ce})}),m.jsx(r("CometColumnItem.react"),{children:m.jsx(r("CAALoggedOutPasswordInputComet.react"),{disabled:pe,errorMessage:!pe&&ye==="INLINE_PASSWORD"?ve:null,focus:Ze==="password",onFocus:function(){return Be("login_password_focus",We)},password:ae,setPassword:de})}),m.jsx(r("CometColumnItem.react"),{paddingTop:12,children:rt}),Qe,m.jsx(r("CometColumnItem.react"),{children:m.jsx(r("CAAFetaAccountRecoveryButton.react"),{appType:z,next:I,onPress:function(){Be("forgot_password_button_clicked",We),$==null||$(),T==null||T("EXIT")},resetURI:G})}),a===0x453bf7349370c&&n("cr:8547")&&!X&&m.jsx(r("CometColumnItem.react"),{paddingTop:40,children:m.jsx(n("cr:8547"),{disabled:pe,next:I,onPress:Ge})}),Y?null:m.jsx(r("CometColumnItem.react"),{paddingTop:!X&&a===0x453bf7349370c&&n("cr:8547")?0:40,children:m.jsx(r("CAARegistrationCreateAccountButton"),{_regInstance:H!=null?H:"",appType:z,blockReg:j!=null?j:!1,entryPoint:d,next:I,onClick:function(){Be("sign_up_button_clicked",We),D==null||D()},type:"secondaryEmphasized"})}),B&&m.jsx(r("CometColumnItem.react"),{paddingTop:16,paddingVertical:R?16:0,children:m.jsx(r("MetaLockupPrimary.react"),{size:12})}),nt&&m.jsx(r("CometColumnItem.react"),{paddingTop:16,children:y&&m.jsx(y,{entryPoint:"login_or_aymh"})})]}),m.jsx("div",{hidden:!0,children:m.jsx("input",{disabled:qe,type:"submit"})})]}))})})}v.displayName=v.name+" [from "+i.id+"]",l.default=v}),226);