;/*FB_PKG_DELIM*/

__d("useCAALoginSubmitResponseCommonCallback",["CAAIGLoginRecaptchaDialog.entrypoint","CAAIGLoginStopAccountDeletionDialog.entrypoint","CAARegistrationNTAUpsellFromLoginDialog.entrypoint","CAAWebLoginLoggingUtils","CAAWebTwoFactorTrustedDeviceUtils","CAAWebWaterfallIdSingleton","FBLogger","GraphQLError","MAEntAccountTypeNameUtils","NTAErrorDialogFor3pl.entrypoint","XPolarisCAAIGProfileSelectionControllerRouteBuilder","XPolarisCAAIGSaveProfileControllerRouteBuilder","cr:8582","cr:8584","cr:9920","emptyFunction","goForceFullPageRedirectTo","nullthrows","qex","react","useCDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useState,p=(e=r("qex")._("1660"))!=null?e:!1,_=(s=r("qex")._("1666"))!=null?s:!1;function f(e,t,a,i,l,s,u,c,f,g,h,y,C,b){c===void 0&&(c=r("emptyFunction")),f===void 0&&(f=r("emptyFunction")),g===void 0&&(g="NONE"),h===void 0&&(h=r("emptyFunction")),y===void 0&&(y=r("emptyFunction")),C===void 0&&(C=r("emptyFunction")),b===void 0&&(b=r("emptyFunction"));var v=null;e===772021112871879?v="messenger":e===0x453bf7349370c?v="instagram":v="facebook";var S=o("MAEntAccountTypeNameUtils").appIdToMAEntAccountType(e),R=m(null),L=R[0],E=R[1],k=m(!1),I=k[0],T=k[1],D=r("useCDSEntryPointDialog")(r("CAARegistrationNTAUpsellFromLoginDialog.entrypoint"),{context:L!=null?L:""}),x=D[0],$=r("useCDSEntryPointDialog")(r("NTAErrorDialogFor3pl.entrypoint"),{nta_context:L!=null?L:""}),P=$[0];d(function(){L!==null&&(I?P({appType:S}):x({appType:S,isFirstStep:!0}))},[L,x,I,P,S]);var N=r("useCDSEntryPointDialog")(r("CAAIGLoginRecaptchaDialog.entrypoint"),{}),M=N[0],w=r("useCDSEntryPointDialog")(r("CAAIGLoginStopAccountDeletionDialog.entrypoint"),{}),A=w[0],F=n("cr:9920")==null?void 0:n("cr:9920").useDispatch(),O=function(n,i,l,s,u,c,d){if(n===void 0&&(n=!1),s===void 0&&(s=!1),u===void 0&&(u=null),c===void 0&&(c=!1),!!d){if(n&&u==null&&!p){r("FBLogger")("caa_login_core_product").mustfix("Missing cryptedUid for successful web login");return}o("CAAWebLoginLoggingUtils").logLoginResult(t,a,S,n,i,l,s,u,c,g)}},B=function(m,p){var d,g,S,R,L,k,I,D,x,$,P,N,w,B,W,q,U,V,H,G=(d=(g=m.caa_login_web)==null?void 0:g.is_3pl)!=null?d:!1,z=(S=(R=m.caa_login_web)==null?void 0:R.is_xapp_login)!=null?S:!1,j=(L=(k=m.caa_login_web)==null?void 0:k.is_ig_login_recaptcha)!=null?L:!1,K=((I=m.caa_login_web)==null||(I=I.stop_deletion_payload)==null?void 0:I.stop_deletion_date)!=null&&((D=m.caa_login_web)==null||(D=D.stop_deletion_payload)==null?void 0:D.stop_deletion_nonce)!=null,Q=(x=($=m.caa_login_web)==null?void 0:$.should_show_profile_selector)!=null?x:!1,X=(P=(N=m.caa_login_web)==null?void 0:N.should_show_save_password_dialog)!=null?P:!1,Y=r("CAAWebWaterfallIdSingleton").getWaterfallID(),J=(w=m.caa_login_web)==null?void 0:w.crypted_uid,Z=(B=(W=m.caa_login_web)==null?void 0:W.ig_authenticated)!=null?B:!1;O(Z,(q=(U=m.caa_login_web)==null?void 0:U.error_code)!=null?q:null,(V=(H=m.caa_login_web)==null||(H=H.error_message)==null?void 0:H.text)!=null?V:null,z,J,!1,_);var ee=function(){var e,t,n,r;A({input:p,isFeta:(e=(t=m.caa_login_web)==null||(t=t.stop_deletion_payload)==null?void 0:t.is_feta)!=null?e:!1,onKeepAccount:function(){var e;y((e=m.caa_login_web)==null||(e=e.stop_deletion_payload)==null?void 0:e.stop_deletion_nonce)},stopDeletionDate:(n=(r=m.caa_login_web)==null||(r=r.stop_deletion_payload)==null?void 0:r.stop_deletion_date)!=null?n:""}),l(!1),h(m,!0,p)},te=function(t){var e,o,a=r("nullthrows")(n("cr:8582")==null?void 0:n("cr:8582").parseTwoFactorResponse),l=r("nullthrows")(n("cr:8582")==null?void 0:n("cr:8582").extractTwoFactorChallengeIfPresent),s=r("nullthrows")(n("cr:8584")==null?void 0:n("cr:8584").goToTwoFactorLogin),u=(e=(o=m.caa_login_web)==null?void 0:o.two_factor_result)!=null?e:"",c=t?l(t):a(u);if(c){if(F==null)return h(m,!1,p),r("FBLogger")("growth_login").mustfix("Missing Redux dispatch for IG 2fac login"),!1;var d=i==null?"":Q?r("XPolarisCAAIGProfileSelectionControllerRouteBuilder").buildUri({next:i,request_id:Y!=null?Y:""}).toString():i;return F({next:d,type:"CAA_TWO_FACTOR_INIT"}),F(s(c,{},d)),h(m,!0,p),!0}return!1};if(G&&(e===0x7e36f3fcc43bc&&v==="facebook"||e===0x453bf7349370c&&v==="instagram")){var ne,re,oe,ae,ie,le,se,ue,ce,de,me,pe,_e,fe,ge,he=(ne=m.caa_login_web)==null?void 0:ne.redirect_uri;if(typeof he=="string"){O(!0,null,null,z,J,!1,!_),h(m,!0,p),r("goForceFullPageRedirectTo")(Q?r("XPolarisCAAIGProfileSelectionControllerRouteBuilder").buildUri({next:he,request_id:Y!=null?Y:""}):he);return}T(!0),E((re=(oe=m.caa_login_web)==null?void 0:oe.reg_nta_context)!=null?re:null),O(!1,(ae=(ie=m.caa_login_web)==null?void 0:ie.error_code)!=null?ae:null,(le=(se=m.caa_login_web)==null||(se=se.error_message)==null?void 0:se.text)!=null?le:null,z,J,!1,!_),l(!1),s((ue=(ce=m.caa_login_web)==null?void 0:ce.error_style)!=null?ue:null),u((de=(me=m.caa_login_web)==null?void 0:me.error_message)!=null?de:null),c((pe=(_e=m.caa_login_web)==null?void 0:_e.recaptcha_needed)!=null?pe:!1),f((fe=(ge=m.caa_login_web)==null?void 0:ge.captcha_persist_data)!=null?fe:null),h(m,!1,p)}else{var ye,Ce,be,ve,Se,Re,Le,Ee,ke,Ie,Te,De;if(e===0x453bf7349370c){if(K){ee();return}if(te())return}var xe=(ye=m.caa_login_web)==null?void 0:ye.redirect_uri,$e=(Ce=(be=m.caa_login_web)==null?void 0:be.ig_trusted_device_nonce_refresh)!=null?Ce:{},Pe=$e.nonce,Ne=$e.uid,Me=(ve=r("qex")._("3344"))!=null?ve:!1,we=function(){Pe!=null&&Ne!=null&&Me&&o("CAAWebTwoFactorTrustedDeviceUtils").setXMDSTrustedDevicesNonces(Ne,Pe)};if(typeof xe=="string"){if(j){M({eventFlow:a,eventStep:t,login_recaptcha_url:xe,onError:function(t){var e;if((t==null||(e=t.responseObject)==null?void 0:e.two_factor_required)===!0){if(te(t))return}else s("GENERIC_BANNER"),u(null)},onSuccess:function(){we()}}),l(!1),h(m,!0,p);return}we(),O(!0,null,null,z,J,!1,!_);var Ae=Q?r("XPolarisCAAIGProfileSelectionControllerRouteBuilder").buildUri({is_spi_enabled:X,next:xe,request_id:Y!=null?Y:""}).toString():xe;r("goForceFullPageRedirectTo")(X&&!Q?r("XPolarisCAAIGSaveProfileControllerRouteBuilder").buildUri({next:Ae}):Ae),h(m,!0,p);return}var Fe=(Se=(Re=m.caa_login_web)==null?void 0:Re.reg_nta_context)!=null?Se:null;if(E(Fe),O(!1,(Le=m.caa_login_web)==null?void 0:Le.error_code,(Ee=m.caa_login_web)==null||(Ee=Ee.error_message)==null?void 0:Ee.text,z,J,!1,!_),l(!1),Fe==null){var Oe,Be,We,qe,Ue,Ve,He,Ge;s((Oe=(Be=m.caa_login_web)==null?void 0:Be.error_style)!=null?Oe:"GENERIC_BANNER"),u((We=(qe=m.caa_login_web)==null?void 0:qe.error_message)!=null?We:null),c((Ue=(Ve=m.caa_login_web)==null?void 0:Ve.recaptcha_needed)!=null?Ue:!1),f((He=(Ge=m.caa_login_web)==null?void 0:Ge.captcha_persist_data)!=null?He:null)}h(m,Fe!=null,p);var ze=(ke=(Ie=m.caa_login_web)==null?void 0:Ie.google_oauth_uri)!=null?ke:null,je=((Te=(De=m.caa_login_web)==null?void 0:De.should_show_google_oauth_after_failure)!=null?Te:!1)&&ze!=null;C(je),b(ze)}},W=function(t,n){var e=t.number,a=t.message;if(t.name==="GraphQLError"){var i,d,m=t;e=o("GraphQLError").getErrorCode(m),a=(i=(d=o("GraphQLError").getErrorMessage(m))!=null?d:o("GraphQLError").getErrorSummary(m))!=null?i:o("GraphQLError").getErrorExceptionMessage(m)}e==null&&r("FBLogger")("caa_login_core_product").catching(t).warn("Login error with null errorCode - name: %s, message: %s",t.name,t.message),O(!1,e,a,!1,null,!1,!_);var p=t.message;if(p&&p.includes("1357004")){r("goForceFullPageRedirectTo")("/");return}l(!1),s("GENERIC_BANNER"),u(null),c(!1),f(null),h(null,!1,n,t)};return{onCompleted:B,onError:W}}l.default=f}),98);